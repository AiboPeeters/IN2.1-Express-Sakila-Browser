extends layout

block content

  h1= title
  p Hieronder ziet u een lijst met beschikbare films.

  form(method="get", action="/movies", class="mb-4 d-flex align-items-center gap-2")
    label(for="limit", class="form-label mb-0 me-2") Aantal films per pagina:
    select#limit.form-select(name="limit", onchange="this.form.submit()", style="width: auto;")
      option(value="5" selected=limit==5) 5
      option(value="10" selected=limit==10) 10
      option(value="20" selected=limit==20) 20
      option(value="40" selected=limit==40) 40
    input(type="hidden", name="page", value=page)

  .container
    .row
      each movie in movies
        .col-md-4.mb-4
          .card.h-100
            .poster-container
              img.poster-bg(src=movie.image, alt="Poster achtergrond")
              img.poster-fg(src=movie.image, alt="Filmposter")
            .card-body
              h5.card-title #{movie.title}
              p.card-text #{movie.description}
              a.btn.btn-primary(href=`/movies/${movie.film_id}`) Details

  if totalPages > 1
    nav(aria-label="Paginering")
      ul.pagination.justify-content-center

        li.page-item(class=!pagination.hasPrev ? 'disabled' : '')
          a.page-link(href=pagination.hasPrev ? `/movies?page=${pagination.prevPage}&limit=${limit}` : '#') &laquo; Prev

        each link in pagination.pageLinks
          if link.type === 'ellipsis'
            li.page-item.disabled.d-none.d-sm-block
              span.page-link â€¦
          else if link.type === 'page'
            li.page-item(class=link.active ? 'active d-none d-sm-block' : 'd-none d-sm-block')
              a.page-link(href=`/movies?page=${link.number}&limit=${limit}`) #{link.number}

        li.page-item(class=!pagination.hasNext ? 'disabled' : '')
          a.page-link(href=pagination.hasNext ? `/movies?page=${pagination.nextPage}&limit=${limit}` : '#') Next &raquo;
